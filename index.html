<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What A Poster</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* style.css content starts here */
        body {
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: #f8f9fa; /* Original light background for the overall page */
            color: #212529; /* Original text color */
        }
        .navbar {
            background-color: #f8f9fa; /* Original light background for navbar */
            box-shadow: 0 2px 4px rgba(0,0,0,.05);
        }
        .navbar-brand {
            color: #007bff !important; /* Original primary color for brand */
            font-weight: bold; /* Ensure the text title is bold */
            font-size: 1.5rem; /* Adjust font size as needed */
            cursor: pointer; /* Add cursor pointer to indicate clickability */
        }
        /* Removed .navbar-brand img and .navbar-brand .logo-img styles as they are no longer needed */

        .navbar-nav .nav-link {
            color: rgba(0,0,0,.55) !important; /* Original text color for nav links */
            transition: color 0.2s ease-in-out;
        }
        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link.active {
            color: #007bff !important; /* Original primary color on hover/active */
        }
        .main-content {
            flex: 1;
        }
        .hero-carousel {
            background-color: #e9ecef; /* Original light grey background for carousel section */
            padding: 2rem 0;
            color: #212529; /* Original text color on background */
        }
        .carousel-item img {
            max-height: 500px;
            object-fit: cover;
            width: 100%;
        }
        .poster-card {
            border: none;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,.05); /* Original shadow */
            transition: transform 0.2s ease-in-out;
            position: relative;
            background-color: #FFFFFF; /* Original white card background */
        }
        .poster-card:hover {
            transform: translateY(-5px); /* Original lift on hover */
            box-shadow: 0 4px 8px rgba(0,0,0,.1); /* Lighter shadow on hover */
        }
        .poster-card img {
            border-top-left-radius: 0.75rem;
            border-top-right-radius: 0.75rem;
            object-fit: cover;
            width: 100%;
            height: 250px;
        }
        .poster-card .card-body {
            padding: 1rem;
        }
        .poster-card .card-title {
            font-weight: 600; /* Original font weight */
            font-size: 1.15rem; /* Original font size */
            color: #212529; /* Original text color */
        }
        .poster-card .card-text {
            font-size: 0.9rem; /* Original font size */
            color: #6c757d; /* Original grey for body text */
        }
        .item-number-color {
            color: #6c757d; /* Original grey for item number */
            font-weight: bold;
            font-size: 0.95rem;
        }
        .price {
            font-size: 1.25rem; /* Original font size */
            font-weight: 700; /* Original font weight */
            color: #007bff; /* Original primary color for price */
        }
        .label {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #dc3545; /* Original red for new */
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 10;
        }
        .label.new {
            background-color: #28a745; /* Original green for new */
        }
        .label.sold {
            background-color: #6c757d; /* Original grey for sold */
            color: white;
        }
        .footer {
            background-color: #343a40; /* Original dark background for footer */
            color: white;
            padding: 2rem 0;
            text-align: center;
            width: 100%;
            border-top-left-radius: 0.75rem;
            border-top-right-radius: 0.75rem;
            margin-top: auto;
        }
        .footer a {
            color: #007bff; /* Original primary color links in footer */
            text-decoration: none;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .btn-add-to-cart, .btn-primary {
            background-color: #007bff; /* Original primary color for buttons */
            color: white;
            border-radius: 0.5rem;
            font-weight: 500; /* Original font weight */
            transition: background-color 0.2s ease-in-out;
            border: none; /* Keep border removed for consistency */
        }
        .btn-add-to-cart:hover, .btn-primary:hover {
            background-color: #0056b3; /* Original darker primary color on hover */
            transform: none; /* No lift on hover for original theme */
        }
        .btn-add-to-cart:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        .btn-secondary {
            background-color: #6c757d; /* Original secondary grey */
            color: white;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: background-color 0.2s ease-in-out;
            border: none;
        }
        .btn-secondary:hover {
            background-color: #5a6268;
        }

        /* Message box styling */
        .message-box-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6); /* Original overlay opacity */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1050;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .message-box-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .message-box {
            background: white; /* Original white background */
            padding: 2rem; /* Original padding */
            border-radius: 1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); /* Original shadow */
            text-align: center;
            max-width: 400px; /* Original width */
            width: 90%;
            transform: translateY(-20px); /* Original entry animation */
            transition: transform 0.3s ease-in-out;
            color: #212529; /* Original text color */
        }
        .message-box-overlay.show .message-box {
            transform: translateY(0);
        }
        .message-box h5 {
            margin-bottom: 1rem;
            font-weight: 600;
            color: #212529; /* Original title color */
        }
        .message-box button {
            margin-top: 1.5rem;
            padding: 0.75rem 1.5rem; /* Original button size */
            border-radius: 0.5rem; /* Original border radius */
            font-weight: 500;
            background-color: #007bff; /* Original primary button color */
            color: white;
        }
        .message-box button:hover {
            background-color: #0056b3; /* Original darker primary on hover */
        }

        /* Cart page specific styles */
        #cart-page {
            display: none;
            background-color: white; /* Original white background for cart page */
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 8px rgba(0,0,0,.05);
        }
        .cart-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            border-bottom: 1px solid #eee; /* Original lighter border */
            padding-bottom: 1rem;
        }
        .cart-item:last-child {
            border-bottom: none;
        }
        .cart-item img {
            width: 80px; /* Original image size */
            height: 80px;
            object-fit: cover;
            border-radius: 0.5rem; /* Original border radius */
            margin-right: 1rem;
            border: none; /* Removed border */
        }
        .cart-item-details {
            flex-grow: 1;
        }
        .cart-item-details h6 {
            margin-bottom: 0.25rem;
            font-weight: 600;
            color: #212529; /* Original text color */
        }
        .cart-item-details p {
            margin-bottom: 0;
            font-size: 0.9rem;
            color: #6c757d;
        }
        .cart-total {
            font-size: 1.5rem; /* Original total font size */
            font-weight: 700;
            color: #212529; /* Original total color */
        }
        .remove-item-btn {
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.5rem 0.75rem; /* Original padding */
            font-size: 0.8rem;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .remove-item-btn:hover {
            background-color: #c82333;
        }
        .shipping-disclaimer {
            font-size: 0.9rem; /* Original font size */
            color: #6c757d; /* Original grey for disclaimer */
            text-align: right;
            margin-top: 0.5rem;
        }
        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem; /* Reduced spacing between buttons */
            justify-content: center;
            margin-bottom: 3rem; /* Increased spacing between filter section and tiles */
            padding: 1rem 0; /* Added padding for better visual separation */
        }
        .filter-buttons .btn {
            border-radius: 0.5rem; /* Original border radius */
            padding: 0.5rem 1rem; /* Original padding */
            font-size: 0.9rem;
            transition: all 0.2s ease-in-out;
            border: 1px solid #007bff; /* Original border */
            color: #007bff; /* Original text color for inactive filters */
            background-color: transparent;
        }
        .filter-buttons .btn:hover {
            background-color: #007bff; /* Original background on hover */
            color: white;
        }
        .filter-buttons .btn.active {
            background-color: #007bff; /* Original primary for active filter */
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,.1); /* Original shadow */
            border-color: #007bff; /* Original border color for active filter */
        }
        .filter-buttons .btn.all-filter-button {
            font-weight: bold;
            padding: 0.75rem 1.5rem; /* Larger padding for "All" button */
            border-width: 2px; /* Thicker border for "All" button */
        }

        /* Social media share icons styling */
        .social-share-container {
            display: flex;
            justify-content: center;
            gap: 0.75rem; /* Spacing between social media icons */
            margin-top: 1rem;
        }
        .social-share-container a {
            color: #6c757d; /* Default icon color */
            font-size: 1.25rem; /* Icon size */
            transition: color 0.2s ease-in-out;
        }
        .social-share-container a:hover {
            color: #007bff; /* Hover color */
        }
        .social-share-container .fa-pinterest:hover {
            color: #E60023; /* Pinterest brand color */
        }
        .social-share-container .fa-x-twitter:hover {
            color: #000000; /* X (Twitter) brand color */
        }
        .social-share-container .fa-facebook-f:hover {
            color: #1877F2; /* Facebook brand color */
        }
        /* Removed Instagram specific hover color */

        /* Styles for clickable image/title */
        .poster-card .clickable-area {
            cursor: pointer;
            display: block; /* Make the whole area clickable */
            text-decoration: none; /* Remove underline from title link */
            color: inherit; /* Inherit color for title */
        }
        .poster-card .clickable-area:hover .card-title {
            color: #007bff; /* Highlight title on hover */
        }

        /* Full-screen image modal adjustments */
        #imageModal .modal-dialog {
            margin: 0; /* Remove default margin */
            width: 100vw; /* Full viewport width */
            max-width: 100vw; /* Ensure it takes full width */
            height: 100vh; /* Full viewport height */
            max-height: 100vh; /* Ensure it takes full height */
        }

        #imageModal .modal-content {
            height: 100%;
            border-radius: 0; /* Remove border-radius for full screen */
            display: flex; /* Use flexbox for modal content */
            flex-direction: column; /* Stack header, body, footer vertically */
        }

        #imageModal .modal-body {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-grow: 1; /* Allow body to take available space */
            padding: 0; /* Remove padding to allow image to fill */
            overflow: hidden; /* Hide overflow if image is larger than viewport */
        }

        /* Styles for the carousel itself within the modal */
        #modalImageCarousel {
            height: 100%; /* Ensure the carousel takes full height of its parent (modal-body) */
        }

        /* Styles for the carousel inner container */
        #modalImageCarousel .carousel-inner {
            height: 100%; /* Ensure the inner container takes full height of the carousel */
        }

        /* Styles for individual carousel items (slides) */
        #modalImageCarousel .carousel-item {
            height: 100%; /* Ensure each carousel item takes full height of the inner container */
            display: flex; /* Use flexbox to center image vertically */
            justify-content: center; /* Center image horizontally */
            align-items: center; /* Center image vertically */
        }

        /* Crucial fix: Hide non-active carousel items */
        #modalImageCarousel .carousel-item:not(.active) {
            display: none;
        }

        /* Styles for the images inside the carousel items */
        #modalImageCarousel .carousel-item img {
            max-width: 100%;
            max-height: 100%;
            width: auto; /* Allow image to scale down */
            height: auto; /* Allow image to scale down */
            object-fit: contain; /* Ensure the image is fully visible within the modal */
            display: block; /* Ensure image takes up its own block space */
            margin: auto; /* Center the image */
        }

        #imageModal .modal-footer {
            display: flex;
            justify-content: space-between; /* Space out buttons */
            align-items: center;
            padding: 1rem;
        }

        /* Custom styles for mobile cart link */
        .navbar .nav-link.mobile-cart-link {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 1.1rem;
            color: rgba(0,0,0,.55) !important; /* Match default nav-link color */
            text-decoration: none;
            transition: color 0.2s ease-in-out;
        }

        .navbar .nav-link.mobile-cart-link:hover {
            color: #007bff !important; /* Match nav-link hover color */
        }

        /* Ensure vertical alignment of items within the navbar, important for flexbox */
        .navbar-brand,
        .navbar-toggler,
        .nav-link {
            align-self: center;
        }

        /* New styles for How to Order modal content */
        .how-to-order-step {
            background-color: #f2f7fc; /* Light blue background for steps */
            border-left: 5px solid #007bff; /* Blue left border */
            border-radius: 0.5rem;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .how-to-order-step .step-icon {
            font-size: 1.8rem;
            color: #007bff;
            flex-shrink: 0; /* Prevent icon from shrinking */
            padding-top: 0.2rem; /* Adjust icon alignment */
        }

        .how-to-order-step h6 {
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #007bff; /* Blue for step titles */
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .how-to-order-step ul {
            list-style: none; /* Remove default bullet points */
            padding-left: 0; /* Remove default padding */
            margin-bottom: 0;
        }

        .how-to-order-step ul li {
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .how-to-order-step ul li:last-child {
            margin-bottom: 0;
        }

        .how-to-order-important {
            background-color: #fff3cd; /* Light yellow background for important section */
            border-left: 5px solid #ffc107; /* Yellow left border */
            border-radius: 0.5rem;
            padding: 1rem 1.5rem;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .how-to-order-important h6 {
            color: #dc3545; /* Red for important title */
            font-weight: 700;
            margin-bottom: 0.75rem;
        }

        .how-to-order-important ul {
            list-style: none;
            padding-left: 0;
            margin-bottom: 0;
        }

        .how-to-order-important ul li {
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .how-to-order-important ul li:last-child {
            margin-bottom: 0;
        }

        .how-to-order-important .fw-bold.text-danger {
            color: #dc3545 !important; /* Ensure red color for bold text */
        }

        /* What Happens Next section */
        .what-happens-next-section {
            background-color: #e9f7ef; /* Light green background */
            border-left: 5px solid #28a745; /* Green left border */
            border-radius: 0.5rem;
            padding: 1rem 1.5rem;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .what-happens-next-section h6 {
            color: #28a745; /* Green for title */
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .what-happens-next-section ul {
            list-style: none;
            padding-left: 0;
            margin-bottom: 0;
        }

        .what-happens-next-section ul li {
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .what-happens-next-section ul li:last-child {
            margin-bottom: 0;
        }

        /* Other Inquiries section */
        .other-inquiries-section {
            background-color: #e6f7ff; /* Light blue background */
            border-left: 5px solid #17a2b8; /* Teal left border */
            border-radius: 0.5rem;
            padding: 1rem 1.5rem;
            margin-top: 1.5rem;
        }

        .other-inquiries-section h6 {
            color: #17a2b8; /* Teal for title */
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .other-inquiries-section ul {
            list-style: none;
            padding-left: 0;
            margin-bottom: 0;
        }

        .other-inquiries-section ul li {
            margin-bottom: 0;
            line-height: 1.4;
        }

        /* Scroll to Top Button Styles */
        #scrollToTopBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.8); /* Light, slightly transparent */
            color: #007bff; /* Arrow color */
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            z-index: 1000;
            font-size: 1.5rem; /* Size of the arrow icon */
        }

        #scrollToTopBtn.show {
            opacity: 1;
            visibility: visible;
        }

        /* Hide button on larger screens (desktop) */
        @media (min-width: 992px) {
            #scrollToTopBtn {
                display: none !important;
            }
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-light sticky-top py-3">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold d-flex align-items-center" href="#" id="navbar-brand-link">
                What A Poster
            </a>

            <a class="nav-link mobile-cart-link d-lg-none ms-auto me-2" href="#" id="cart-link-mobile">
                <i class="fas fa-shopping-cart"></i> (<span id="cart-count-mobile">0</span>)
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#" id="home-link">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#howToOrderModal">How to Order</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#contactModal">Contact</a>
                    </li>
                    <li class="nav-item d-none d-lg-block">
                        <a class="nav-link" href="#" id="cart-link-desktop"><i class="fas fa-shopping-cart"></i> Cart (<span id="cart-count-desktop">0</span>)</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <section class="hero-carousel container-fluid p-0" id="hero-section">
            <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                    <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
                </div>
                <div class="carousel-inner rounded-3 overflow-hidden shadow-sm">
                    <div class="carousel-item active">
                        <img src="https://placehold.co/1200x500/007bff/ffffff?text=Lamy+2000+Poster" class="d-block w-100" alt="Lamy 2000 Poster">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">Iconic Lamy 2000</h5>
                            <p>Celebrate timeless design with our Lamy 2000 poster collection.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://placehold.co/1200x500/28a745/ffffff?text=Lamy+Safari+Poster" class="d-block w-100" alt="Lamy Safari Poster">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">Vibrant Safari Series</h5>
                            <p>Bring color to your space with our Lamy Safari inspired art.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://placehold.co/1200x500/ffc107/343a40?text=Lamy+Lx+Poster" class="d-block w-100" alt="Lamy Lx Poster">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">Elegant Lx Collection</h5>
                            <p>Sophisticated designs for the discerning collector.</p>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </section>

        <section id="posters-section" class="container my-5">
            <h2 class="text-center mb-4 fw-bold">Our Lamy Poster Collection</h2>
            <div id="filter-buttons" class="filter-buttons">
                </div>
            <div id="poster-grid" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
                </div>
        </section>

        <section id="cart-page" class="container my-5">
            <h2 class="text-center mb-4 fw-bold">Your Shopping Cart</h2>
            <div id="cart-items" class="mb-4">
                </div>
            <div class="d-flex justify-content-end align-items-center mb-4 flex-column">
                <h4 class="cart-total me-3">Total: $<span id="cart-total">0.00</span></h4>
                <p class="shipping-disclaimer">Price does not include shipping cost and taxes.</p>
            </div>
            <div class="d-flex justify-content-between">
                <button id="continue-shopping-btn" class="btn btn-secondary rounded-pill px-4">Continue Shopping</button>
                <button id="proceed-to-checkout-btn" class="btn btn-primary rounded-pill px-4" disabled>Proceed to Checkout</button>
            </div>
        </section>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 What A Poster. All rights reserved.</p>
            <div class="social-icons mt-3">
                <a href="#" class="text-white mx-2"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="text-white mx-2"><i class="fab fa-twitter"></i></a>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="mailtoModal" tabindex="-1" aria-labelledby="mailtoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-3 shadow-lg">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="mailtoModalLabel">Purchase Inquiry (Your Cart)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <div id="shippingFormContent">
                        <form id="shippingAddressForm">
                            <p class="mb-3">Please enter your shipping details:</p>
                            <div class="mb-3">
                                <label for="fullName" class="form-label">Full Name</label>
                                <input type="text" class="form-control rounded-pill" id="fullName" required>
                            </div>
                            <div class="mb-3">
                                <label for="addressLine1" class="form-label">Address Line 1</label>
                                <input type="text" class="form-control rounded-pill" id="addressLine1" required>
                            </div>
                            <div class="mb-3">
                                <label for="addressLine2" class="form-label">Address Line 2 (Optional)</label>
                                <input type="text" class="form-control rounded-pill" id="addressLine2">
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="city" class="form-label">City</label>
                                    <input type="text" class="form-control rounded-pill" id="city" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="state" class="form-label">State</label>
                                    <input type="text" class="form-control rounded-pill" id="state" maxlength="2" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="zipCode" class="form-label">Zip Code</label>
                                    <input type="text" class="form-control rounded-pill" id="zipCode" maxlength="5" required>
                                </div>
                            </div>
                            <p class="mt-3 text-muted text-sm">
                                If link above does not work please email me at email@email.com<br><br>
                                ***Please ensure that Paypal has your correct delivery address - Shipping labels are generated from information you provide.***
                            </p>
                            <button type="submit" id="sendEmailInquiryBtn" class="btn btn-primary w-100 py-2 rounded-pill">
                                <i class="fas fa-envelope me-2"></i> Send Email Inquiry
                            </button>
                        </form>
                    </div>
                    <div id="emailSentConfirmation" style="display: none;">
                        <p class="mb-3">Your email client should now be open with a pre-filled message. Please send the email from there.</p>
                        <p class="mb-3 fw-bold">Once you've sent it, click the button below to clear your cart and close this window.</p>
                        <button id="confirmEmailSentBtn" class="btn btn-success w-100 py-2 rounded-pill">
                            <i class="fas fa-check-circle me-2"></i> I've Sent the Email
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-3 shadow-lg">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="contactModalLabel">Contact Us</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="contactForm">
                        <div class="mb-3">
                            <label for="contactName" class="form-label">Your Name</label>
                            <input type="text" class="form-control rounded-pill" id="contactName" required>
                        </div>
                        <div class="mb-3">
                            <label for="contactEmail" class="form-label">Your Email Address</label>
                            <input type="email" class="form-control rounded-pill" id="contactEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="contactSubject" class="form-label">Subject</label>
                            <input type="text" class="form-control rounded-pill" id="contactSubject" required>
                        </div>
                        <div class="mb-3">
                            <label for="contactMessage" class="form-label">Message</label>
                            <textarea class="form-control rounded-3" id="contactMessage" rows="5" required></textarea>
                        </div>
                        <button type="submit" id="sendContactEmailBtn" class="btn btn-primary w-100 py-2 rounded-pill">
                            <i class="fas fa-paper-plane me-2"></i> Send Message
                        </button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="howToOrderModal" tabindex="-1" aria-labelledby="howToOrderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-3 shadow-lg">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="howToOrderModalLabel">How to Order</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <p class="fw-bold">Welcome to What A Poster! We've designed our ordering process to ensure you get the posters you love, while also keeping you informed about their availability. Please read through these steps carefully:</p>

                    <div class="how-to-order-step">
                        <i class="fas fa-search step-icon"></i>
                        <div>
                            <h6>Step 1: Browse and Add to Cart</h6>
                            <ul>
                                <li>Explore our collection of posters by scrolling through the main page.</li>
                                <li>When you find a poster you're interested in, simply click the "Add to Cart" button. You can add multiple posters to your cart if you wish.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="how-to-order-step">
                        <i class="fas fa-shopping-cart step-icon"></i>
                        <div>
                            <h6>Step 2: Navigate to Your Shopping Cart</h6>
                            <ul>
                                <li>Once you've added all the posters you're interested in, click on the "Cart" link in the top navigation bar (or the cart icon on mobile) to view your selected items.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="how-to-order-step">
                        <i class="fas fa-paper-plane step-icon"></i>
                        <div>
                            <h6>Step 3: Send Your Purchase Inquiry</h6>
                            <ul>
                                <li>In your shopping cart, you'll see a summary of your selected posters and the total price.</li>
                                <li>Click the "Proceed to Checkout" button. This will open a "Purchase Inquiry" box.</li>
                                <li>In this box, you'll be asked to provide your shipping information (Full Name, Address, City, State, and Zip Code). This information is crucial for us to prepare your inquiry and potential shipping label.</li>
                                <li>Once you've filled in your details, click the "Send Email Inquiry" button.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="how-to-order-step">
                        <i class="fas fa-envelope step-icon"></i>
                        <div>
                            <h6>Step 4: Confirm and Send Your Email</h6>
                            <ul>
                                <li>Clicking "Send Email Inquiry" will trigger your default email client (e.g., Outlook, Gmail, Apple Mail) to open.</li>
                                <li>A new email will be pre-filled with:
                                    <ul>
                                        <li>The subject line: "Purchase Inquiry - Posters Cart - [Your Full Name]"</li>
                                        <li>The body: A detailed list of the posters in your cart, the total price, and the shipping information you provided in the box.</li>
                                    </ul>
                                </li>
                                <li><span class="fw-bold">Important:</span> Please review the pre-filled email to ensure all details are correct. Then, <span class="fw-bold">you must manually click "Send" within your email client to send the inquiry to us.</span></li>
                            </ul>
                        </div>
                    </div>

                    <div class="how-to-order-important">
                        <h6><i class="fas fa-exclamation-triangle me-2"></i> Understanding Our Inquiry Process (Important!)</h6>
                        <ul>
                            <li><span class="fw-bold text-danger">This is an Inquiry, Not a Guaranteed Purchase:</span> The "Add to Cart" and "Send Email Inquiry" process is designed to allow you to <em>inquire</em> about the availability of the posters you're interested in. It <span class="fw-bold text-danger">does NOT guarantee</span> that the items are currently in stock or reserved for you.</li>
                            <li><span class="fw-bold">First Come, First Served:</span> Our posters are unique, and availability can change rapidly. We operate on a "first come, first served" basis. There is always a possibility that the website's displayed availability might not reflect the absolute current stock.</li>
                            <li><span class="fw-bold">Why an Inquiry?</span> This inquiry step helps us confirm the exact availability of your selected posters and ensure they are ready for purchase before you make any payment.</li>
                        </ul>
                    </div>

                    <div class="what-happens-next-section">
                        <h6><i class="fas fa-forward step-icon"></i> What Happens Next?</h6>
                        <ul>
                            <li>Once we receive your inquiry email, our team will check the availability of your selected posters.</li>
                            <li><span class="fw-bold">If the posters are available:</span> We will send you a follow-up email containing a secure PayPal link to complete your payment.</li>
                            <li><span class="fw-bold">If the posters are not available:</span> We will send you an email informing you that the requested items are currently out of stock.</li>
                        </ul>
                    </div>

                    <div class="other-inquiries-section">
                        <h6><i class="fas fa-info-circle step-icon"></i> Other Inquiries:</h6>
                        <ul>
                            <li>If you have general questions or need to contact us for reasons other than a purchase inquiry, please click the button below:</li>
                            <li>
                                <button type="button" class="btn btn-primary rounded-pill px-4 mt-2" data-bs-toggle="modal" data-bs-target="#contactModal">
                                    <i class="fas fa-question-circle me-1"></i> Contact Us Directly
                                </button>
                            </li>
                        </ul>
                    </div>

                    <p class="text-center mt-4">We appreciate your understanding and look forward to helping you find the perfect posters!</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div id="messageBoxOverlay" class="message-box-overlay">
        <div class="message-box">
            <h5 id="messageBoxTitle"></h5>
            <p id="messageBoxContent"></p>
            <button id="messageBoxCloseBtn" class="btn btn-primary">OK</button>
        </div>
    </div>

    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content rounded-3 shadow-lg">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="imageModalLabel"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-2 text-center">
                    <div id="modalImageCarousel" class="carousel slide h-100">
                        <div class="carousel-indicators" id="carouselIndicators">
                            </div>
                        <div class="carousel-inner h-100" id="carouselInner">
                            </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#modalImageCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#modalImageCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="modalAddToCartBtn" class="btn btn-add-to-cart rounded-pill px-4">Add to Cart</button>
                    <button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <button id="scrollToTopBtn" class="btn btn-light rounded-circle shadow">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script>
        // Data for Lamy products
        const lamyProducts = [
            { id: 'p001', name: 'Lamy Safari Fountain Pen Poster', category: 'Safari', price: 29.99, isNew: true, isSold: false, images: ['https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fmylamy.com.tw%2Fwp-content%2Fuploads%2FLAMY-SAFARI-2024-%25E5%25BE%25A9%25E5%258F%25A4%25E7%25B6%25A0%25E9%2587%2591%25E5%25A4%25BE-DM-%25E6%25AD%25A3%25E6%2596%25B9%25E9%258B%25BC%25E7%25AD%2586-scaled.jpg&f=1&nofb=1&ipt=01ba2c8278f9ef743e1d22dec2f13a6c81131a2d5d6f1e0807d7863f716a98d3', 'https://placehold.co/400x250/17a2b8/ffffff?text=Safari+Blue+Variant', 'https://placehold.co/400x250/fd7e14/ffffff?text=Safari+Orange+Variant'], description: 'A vibrant tribute to the iconic Lamy Safari, known for its ergonomic design and bold colors.' },
            { id: 'p002', name: 'Lamy Al-Star Blueprint Poster', category: 'Al-Star', price: 34.99, isNew: false, isSold: false, images: ['https://placehold.co/400x250/28a745/ffffff?text=Al-Star+Poster', 'https://placehold.co/400x250/343a40/ffffff?text=Al-Star+Black+Variant'], description: 'An intricate blueprint design showcasing the aluminum body and transparent grip of the Al-Star series.' },
            { id: 'p003', name: 'Lamy Lx Minimalist Art Print', category: 'Lx', price: 39.99, isNew: false, isSold: true, images: ['https://placehold.co/400x250/ffc107/343a40?text=Lx+Poster'], description: 'A sleek and minimalist art print inspired by the elegant and refined Lamy Lx fountain pen.' },
            { id: 'p004', name: 'Lamy 2000 Exploded View Poster', category: 'Lamy 2000', price: 49.99, isNew: true, isSold: false, images: ['https://placehold.co/400x250/dc3545/ffffff?text=2000+Poster', 'https://placehold.co/400x250/e83e8c/ffffff?text=2000+Sectional+View'], description: 'Detailed exploded view of the legendary Lamy 2000, highlighting its innovative design and craftsmanship.' },
            { id: 'p005', name: 'Lamy Scala Abstract Design', category: 'Scala', price: 32.99, isNew: false, isSold: false, images: ['https://placehold.co/400x250/6f42c1/ffffff?text=Scala+Poster'], description: 'An abstract interpretation of the Lamy Scala, focusing on its clean lines and sophisticated form.' },
            { id: 'p006', name: 'Lamy Studio Geometric Print', category: 'Studio', price: 28.99, isNew: false, isSold: false, images: ['https://placehold.co/400x250/fd7e14/ffffff?text=Studio+Poster', 'https://placehold.co/400x250/6c757d/ffffff?text=Studio+Line+Art'], description: 'A modern geometric print inspired by the unique propeller-shaped clip and cylindrical body of the Lamy Studio.' },
            { id: 'p007', name: 'Lamy Aion Modern Art', category: 'Aion', price: 36.99, isNew: true, isSold: false, images: ['https://placehold.co/400x250/20c997/ffffff?text=Aion+Poster'], description: 'Contemporary art piece capturing the seamless, elegant design of the Lamy Aion pen.' },
            { id: 'p008', name: 'Lamy Cp1 Technical Drawing', category: 'Cp1', price: 31.99, isNew: false, isSold: true, images: ['https://placehold.co/400x250/6610f2/ffffff?text=Cp1+Poster'], description: 'A precise technical drawing of the slender and minimalist Lamy CP1 pen.' },
            { id: 'p010', name: 'Lamy Al-Star Black Edition', category: 'Al-Star', price: 34.99, isNew: true, isSold: false, images: ['https://placehold.co/400x250/343a40/ffffff?text=Al-Star+Black'], description: 'Showcasing the sleek and sophisticated black edition of the Lamy Al-Star.' },
            { id: 'p011', name: 'Lamy 2000 Sectional View', category: 'Lamy 2000', price: 49.99, isNew: false, isSold: false, images: ['https://placehold.co/400x250/e83e8c/ffffff?text=2000+View'], description: 'An artistic rendering of the internal mechanics of the Lamy 2000 fountain pen.' },
            { id: 'p012', name: 'Lamy Studio Line Art', category: 'Studio', price: 28.99, isNew: false, isSold: true, images: ['https://placehold.co/400x250/6c757d/ffffff?text=Studio+Line'], description: 'Elegant line art focusing on the distinctive silhouette of the Lamy Studio pen.' },
            { id: 'p013', name: 'Lamy Dialog 3 Poster', category: 'Dialog', price: 45.00, isNew: true, isSold: false, images: ['https://placehold.co/400x250/8a2be2/ffffff?text=Dialog+3', 'https://placehold.co/400x250/00ced1/ffffff?text=Dialog+3+Angle'], description: 'A dynamic poster highlighting the innovative twist mechanism of the Lamy Dialog 3.' },
            { id: 'p014', name: 'Lamy Dialog CC Poster', category: 'Dialog CC', price: 42.00, isNew: false, isSold: false, images: ['https://placehold.co/400x250/00ced1/ffffff?text=Dialog+CC'], description: 'Capturing the compact elegance and retractable nib of the Lamy Dialog CC.' },
            { id: 'p015', name: 'Lamy Accent Design', category: 'Accent', price: 31.00, isNew: false, isSold: false, images: ['https://placehold.co/400x250/fd7e14/ffffff?text=Accent'], description: 'An artistic poster emphasizing the interchangeable grip section of the Lamy Accent.' }
        ];

        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        const postersSection = document.getElementById('posters-section');
        const posterGrid = document.getElementById('poster-grid');
        const filterButtonsContainer = document.getElementById('filter-buttons');
        const cartCountDesktop = document.getElementById('cart-count-desktop');
        const cartCountMobile = document.getElementById('cart-count-mobile');
        const cartPage = document.getElementById('cart-page');
        const homeLink = document.getElementById('home-link');
        const cartLinkDesktop = document.getElementById('cart-link-desktop');
        const cartLinkMobile = document.getElementById('cart-link-mobile');
        const continueShoppingBtn = document.getElementById('continue-shopping-btn');
        const proceedToCheckoutBtn = document.getElementById('proceed-to-checkout-btn');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartTotalSpan = document.getElementById('cart-total');
        const mailtoModal = new bootstrap.Modal(document.getElementById('mailtoModal'));
        const contactModal = new bootstrap.Modal(document.getElementById('contactModal'));
        const howToOrderModal = new bootstrap.Modal(document.getElementById('howToOrderModal'));
        const shippingAddressForm = document.getElementById('shippingAddressForm');
        const sendEmailInquiryBtn = document.getElementById('sendEmailInquiryBtn');
        const emailSentConfirmation = document.getElementById('emailSentConfirmation');
        const confirmEmailSentBtn = document.getElementById('confirmEmailSentBtn');
        const messageBoxOverlay = document.getElementById('messageBoxOverlay');
        const messageBoxTitle = document.getElementById('messageBoxTitle');
        const messageBoxContent = document.getElementById('messageBoxContent');
        const messageBoxCloseBtn = document.getElementById('messageBoxCloseBtn');
        const navbarBrandLink = document.getElementById('navbar-brand-link');
        const contactForm = document.getElementById('contactForm');
        const sendContactEmailBtn = document.getElementById('sendContactEmailBtn');
        const imageModal = new bootstrap.Modal(document.getElementById('imageModal'));
        const modalImageCarousel = document.getElementById('modalImageCarousel');
        const carouselIndicators = document.getElementById('carouselIndicators');
        const carouselInner = document.getElementById('carouselInner');
        const imageModalLabel = document.getElementById('imageModalLabel');
        const modalAddToCartBtn = document.getElementById('modalAddToCartBtn');
        const scrollToTopBtn = document.getElementById('scrollToTopBtn');

        let currentModalProductId = null; // To keep track of the product whose images are in the modal

        // --- Helper Functions ---

        function showMessageBox(title, message) {
            messageBoxTitle.textContent = title;
            messageBoxContent.textContent = message;
            messageBoxOverlay.classList.add('show');
        }

        function hideMessageBox() {
            messageBoxOverlay.classList.remove('show');
        }

        // Function to update cart counts
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCountDesktop.textContent = count;
            cartCountMobile.textContent = count;
            proceedToCheckoutBtn.disabled = cart.length === 0;
        }

        // Function to save cart to local storage
        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Function to render product cards
        function renderProducts(productsToRender) {
            posterGrid.innerHTML = ''; // Clear existing products
            productsToRender.forEach(product => {
                const isSoldOut = product.isSold;
                const buttonText = isSoldOut ? 'Sold Out' : 'Add to Cart';
                const buttonDisabled = isSoldOut ? 'disabled' : '';
                const buttonClass = isSoldOut ? 'btn-secondary' : 'btn-add-to-cart';

                const productCard = `
                    <div class="col">
                        <div class="card poster-card h-100" data-product-id="${product.id}">
                            <div class="clickable-area">
                                <img src="${product.images[0]}" class="card-img-top" alt="${product.name}">
                                ${product.isNew ? '<span class="label new">NEW</span>' : ''}
                                ${product.isSold ? '<span class="label sold">SOLD</span>' : ''}
                            </div>
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title clickable-area">${product.name}</h5>
                                <p class="card-text">${product.description}</p>
                                <p class="item-number-color">Item: ${product.id}</p>
                                <p class="price mt-auto">$${product.price.toFixed(2)}</p>
                                <div class="social-share-container mb-3">
                                    <a href="#" class="share-button" data-platform="pinterest" data-product-id="${product.id}"><i class="fab fa-pinterest"></i></a>
                                    <a href="#" class="share-button" data-platform="twitter" data-product-id="${product.id}"><i class="fab fa-x-twitter"></i></a>
                                    <a href="#" class="share-button" data-platform="facebook" data-product-id="${product.id}"><i class="fab fa-facebook-f"></i></a>
                                </div>
                                <button class="btn ${buttonClass} w-100 ${buttonDisabled}" data-product-id="${product.id}" ${buttonDisabled}>
                                    ${buttonText}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                posterGrid.innerHTML += productCard;
            });
            addEventListenersToProductCards();
            addEventListenersToShareButtons();
        }

        // Function to render filter buttons
        function renderFilterButtons() {
            const categories = ['All', ...new Set(lamyProducts.map(p => p.category))];
            filterButtonsContainer.innerHTML = ''; // Clear existing buttons

            categories.forEach(category => {
                const buttonClass = category === 'All' ? 'all-filter-button' : '';
                const button = document.createElement('button');
                button.className = `btn btn-outline-primary rounded-pill px-3 py-2 ${buttonClass}`;
                button.textContent = category;
                button.dataset.category = category;
                filterButtonsContainer.appendChild(button);
            });

            // Add event listeners to filter buttons
            filterButtonsContainer.addEventListener('click', (event) => {
                if (event.target.tagName === 'BUTTON') {
                    const selectedCategory = event.target.dataset.category;
                    filterProducts(selectedCategory);

                    // Update active state of buttons
                    filterButtonsContainer.querySelectorAll('.btn').forEach(btn => {
                        btn.classList.remove('active');
                        btn.classList.remove('btn-primary');
                        btn.classList.add('btn-outline-primary');
                    });
                    event.target.classList.add('active');
                    event.target.classList.remove('btn-outline-primary');
                    event.target.classList.add('btn-primary');
                }
            });

            // Set 'All' as active by default
            const allButton = filterButtonsContainer.querySelector('.all-filter-button');
            if (allButton) {
                allButton.classList.add('active');
                allButton.classList.remove('btn-outline-primary');
                allButton.classList.add('btn-primary');
            }
        }

        // Function to filter and render products
        function filterProducts(category) {
            let filteredProducts = [];
            if (category === 'All') {
                filteredProducts = lamyProducts;
            } else {
                filteredProducts = lamyProducts.filter(product => product.category === category);
            }
            renderProducts(filteredProducts);
        }

        // Function to add product to cart
        function addToCart(productId) {
            const product = lamyProducts.find(p => p.id === productId);
            if (product) {
                if (product.isSold) {
                    showMessageBox('Item Sold Out', 'This item is currently sold out and cannot be added to your cart.');
                    return;
                }

                const cartItem = cart.find(item => item.id === productId);
                if (cartItem) {
                    cartItem.quantity++;
                } else {
                    cart.push({ ...product, quantity: 1 });
                }
                saveCart();
                updateCartCount();
                showMessageBox('Added to Cart', `${product.name} has been added to your cart.`);
            }
        }

        // Function to remove item from cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart();
            renderCartItems();
            updateCartCount();
        }

        // Function to render cart items
        function renderCartItems() {
            cartItemsContainer.innerHTML = ''; // Clear existing items
            let total = 0;

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-center">Your cart is empty.</p>';
            } else {
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    const cartItemElement = `
                        <div class="cart-item">
                            <img src="${item.images[0]}" alt="${item.name}">
                            <div class="cart-item-details">
                                <h6>${item.name}</h6>
                                <p>Quantity: ${item.quantity}</p>
                                <p>Price: $${item.price.toFixed(2)}</p>
                                <p>Total: $${itemTotal.toFixed(2)}</p>
                            </div>
                            <button class="remove-item-btn" data-product-id="${item.id}">Remove</button>
                        </div>
                    `;
                    cartItemsContainer.innerHTML += cartItemElement;
                });
            }

            cartTotalSpan.textContent = total.toFixed(2);
            // Add event listeners to remove buttons
            document.querySelectorAll('.remove-item-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    const productId = event.target.dataset.productId;
                    removeFromCart(productId);
                });
            });
        }

        // Function to show the posters section and hide the cart
        function showPostersSection() {
            postersSection.style.display = 'block';
            // Only show hero section if it's the 'home' view
            const currentActiveNavLink = document.querySelector('.navbar-nav .nav-link.active');
            if (currentActiveNavLink && currentActiveNavLink.id === 'home-link') {
                heroSection.style.display = 'block';
            } else if (document.activeElement && document.activeElement.id === 'navbar-brand-link') {
                heroSection.style.display = 'block';
            } else {
                heroSection.style.display = 'none';
            }
            cartPage.style.display = 'none';
        }

        // Function to show the cart section and hide posters
        function showCartPage() {
            postersSection.style.display = 'none';
            heroSection.style.display = 'none';
            cartPage.style.display = 'block';
            renderCartItems(); // Render cart items whenever cart page is shown
        }

        // Function to generate Mailto link for purchase inquiry
        function generateMailtoLink(fullName, addressLine1, addressLine2, city, state, zipCode) {
            const recipient = 'email@email.com'; // Replace with your actual email
            const subject = `Purchase Inquiry - Posters Cart - ${fullName}`;
            let body = `Dear What A Poster Team,\n\n`;
            body += `I would like to inquire about purchasing the following items from my cart:\n\n`;

            cart.forEach(item => {
                body += `- ${item.name} (Item ID: ${item.id}) - Quantity: ${item.quantity} - Price: $${item.price.toFixed(2)} each\n`;
            });

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            body += `\nCart Total: $${total.toFixed(2)}\n\n`;
            body += `My shipping address is:\n`;
            body += `Full Name: ${fullName}\n`;
            body += `Address Line 1: ${addressLine1}\n`;
            if (addressLine2) {
                body += `Address Line 2: ${addressLine2}\n`;
            }
            body += `City: ${city}\n`;
            body += `State: ${state}\n`;
            body += `Zip Code: ${zipCode}\n\n`;
            body += `Please confirm availability and provide instructions for payment.\n\n`;
            body += `Thank you,\n${fullName}`;

            const encodedBody = encodeURIComponent(body);
            return `mailto:${recipient}?subject=${encodeURIComponent(subject)}&body=${encodedBody}`;
        }

        // Function to generate Mailto link for contact form
        function generateContactMailtoLink(name, email, subject, message) {
            const recipient = 'email@email.com'; // Replace with your actual contact email
            const fullSubject = `Contact Form: ${subject}`;
            const body = `Name: ${name}\nEmail: ${email}\n\nMessage:\n${message}`;

            const encodedBody = encodeURIComponent(body);
            return `mailto:${recipient}?subject=${encodeURIComponent(fullSubject)}&body=${encodedBody}`;
        }

        // Function to open image modal
        function openImageModal(productId) {
            const product = lamyProducts.find(p => p.id === productId);
            if (!product) return;

            currentModalProductId = productId; // Store the ID of the product currently in the modal

            imageModalLabel.textContent = product.name; // Set modal title
            modalAddToCartBtn.dataset.productId = productId; // Set product ID for add to cart button

            // Disable Add to Cart button if sold out or already in cart
            const isInCart = cart.some(item => item.id === productId);
            if (product.isSold) {
                modalAddToCartBtn.textContent = 'Sold Out';
                modalAddToCartBtn.disabled = true;
                modalAddToCartBtn.classList.add('btn-secondary');
                modalAddToCartBtn.classList.remove('btn-primary');
            } else if (isInCart) {
                modalAddToCartBtn.textContent = 'Added to Cart';
                modalAddToCartBtn.disabled = true;
                modalAddToCartBtn.classList.remove('btn-secondary');
                modalAddToCartBtn.classList.add('btn-primary');
            } else {
                modalAddToCartBtn.textContent = 'Add to Cart';
                modalAddToCartBtn.disabled = false;
                modalAddToCartBtn.classList.remove('btn-secondary');
                modalAddToCartBtn.classList.add('btn-primary');
            }

            // Clear previous carousel content
            carouselIndicators.innerHTML = '';
            carouselInner.innerHTML = '';

            // Populate carousel with product images
            product.images.forEach((imageSrc, index) => {
                const indicator = `<button type="button" data-bs-target="#modalImageCarousel" data-bs-slide-to="${index}" class="${index === 0 ? 'active' : ''}" aria-current="${index === 0 ? 'true' : 'false'}" aria-label="Slide ${index + 1}"></button>`;
                carouselIndicators.innerHTML += indicator;

                const carouselItem = `<div class="carousel-item ${index === 0 ? 'active' : ''}">
                                        <img src="${imageSrc}" class="d-block w-100" alt="${product.name} - Image ${index + 1}">
                                      </div>`;
                carouselInner.innerHTML += carouselItem;
            });

            imageModal.show(); // Show the Bootstrap modal
        }

        // --- Event Listeners ---

        // Add event listeners to "Add to Cart" buttons dynamically
        function addEventListenersToProductCards() {
            document.querySelectorAll('.poster-card .btn-add-to-cart, .poster-card .clickable-area').forEach(element => {
                element.removeEventListener('click', handleProductCardClick); // Remove existing listener to prevent duplicates
                element.addEventListener('click', handleProductCardClick);
            });
        }

        function handleProductCardClick(event) {
            const productId = event.currentTarget.dataset.productId || event.currentTarget.closest('.poster-card').dataset.productId;
            if (event.target.classList.contains('btn-add-to-cart')) {
                // If the add to cart button was clicked
                addToCart(productId);
            } else if (event.target.closest('.clickable-area')) {
                // If the image or title was clicked
                openImageModal(productId);
            }
        }

        // Add event listeners to social share buttons
        function addEventListenersToShareButtons() {
            document.querySelectorAll('.share-button').forEach(button => {
                button.removeEventListener('click', handleShareButtonClick); // Prevent duplicate listeners
                button.addEventListener('click', handleShareButtonClick);
            });
        }

        function handleShareButtonClick(event) {
            event.preventDefault(); // Prevent default link behavior
            const platform = event.currentTarget.dataset.platform;
            const productId = event.currentTarget.dataset.productId;
            const product = lamyProducts.find(p => p.id === productId);

            if (!product) return;

            const pageUrl = window.location.href; // Get current page URL
            const imageUrl = product.images[0]; // Use the first image for sharing
            const text = `Check out this amazing poster: ${product.name} from What A Poster! Price: $${product.price.toFixed(2)}.`;

            let shareUrl = '';

            switch (platform) {
                case 'pinterest':
                    shareUrl = `https://pinterest.com/pin/create/button/?url=${encodeURIComponent(pageUrl)}&media=${encodeURIComponent(imageUrl)}&description=${encodeURIComponent(text)}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(pageUrl)}`;
                    break;
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(pageUrl)}&quote=${encodeURIComponent(text)}`;
                    break;
                default:
                    return;
            }

            window.open(shareUrl, '_blank', 'width=600,height=400');
        }

        // Event listener for Mailto modal's Add to Cart button
        modalAddToCartBtn.addEventListener('click', () => {
            if (currentModalProductId) {
                addToCart(currentModalProductId);
                imageModal.hide(); // Hide the image modal after adding to cart
            }
        });


        // Navigation
        homeLink.addEventListener('click', (event) => {
            event.preventDefault();
            showPostersSection();
            filterProducts('All'); // Reset filters to "All" when going to home
            // Also reset active nav link
            document.querySelectorAll('.navbar-nav .nav-link').forEach(link => link.classList.remove('active'));
            homeLink.classList.add('active');
            // Also reset active filter button
            filterButtonsContainer.querySelectorAll('.btn').forEach(btn => {
                btn.classList.remove('active', 'btn-primary');
                btn.classList.add('btn-outline-primary');
            });
            const allButton = filterButtonsContainer.querySelector('.all-filter-button');
            if (allButton) {
                allButton.classList.add('active', 'btn-primary');
                allButton.classList.remove('btn-outline-primary');
            }
        });

        cartLinkDesktop.addEventListener('click', (event) => {
            event.preventDefault();
            showCartPage();
            // Update active nav link
            document.querySelectorAll('.navbar-nav .nav-link').forEach(link => link.classList.remove('active'));
            cartLinkDesktop.classList.add('active');
        });

        cartLinkMobile.addEventListener('click', (event) => {
            event.preventDefault();
            showCartPage();
            // Update active nav link
            document.querySelectorAll('.navbar-nav .nav-link').forEach(link => link.classList.remove('active'));
            cartLinkMobile.classList.add('active');
        });

        continueShoppingBtn.addEventListener('click', () => {
            showPostersSection();
            // Reset active nav link to Home
            document.querySelectorAll('.navbar-nav .nav-link').forEach(link => link.classList.remove('active'));
            homeLink.classList.add('active');
        });

        proceedToCheckoutBtn.addEventListener('click', () => {
            if (cart.length > 0) {
                // Reset form and confirmation message
                shippingAddressForm.reset();
                document.getElementById('shippingFormContent').style.display = 'block';
                emailSentConfirmation.style.display = 'none';
                mailtoModal.show();
            } else {
                showMessageBox('Cart Empty', 'Your cart is empty. Please add items before proceeding to checkout.');
            }
        });

        shippingAddressForm.addEventListener('submit', (event) => {
            event.preventDefault();
            const fullName = document.getElementById('fullName').value;
            const addressLine1 = document.getElementById('addressLine1').value;
            const addressLine2 = document.getElementById('addressLine2').value;
            const city = document.getElementById('city').value;
            const state = document.getElementById('state').value;
            const zipCode = document.getElementById('zipCode').value;

            const mailtoLink = generateMailtoLink(fullName, addressLine1, addressLine2, city, state, zipCode);

            // Try to open the mailto link
            const newWindow = window.open(mailtoLink, '_blank');
            if (newWindow) {
                newWindow.blur(); // Try to unfocus the new window
                window.focus(); // Bring main window back into focus
                document.getElementById('shippingFormContent').style.display = 'none';
                emailSentConfirmation.style.display = 'block';
            } else {
                // Fallback if the pop-up was blocked
                showMessageBox('Email Client Blocked', 'Your email client could not be opened automatically. Please copy the details below and send them manually to email@email.com:\n\n' + decodeURIComponent(mailtoLink.split('body=')[1]));
            }
        });

        confirmEmailSentBtn.addEventListener('click', () => {
            cart = []; // Clear the cart
            saveCart();
            updateCartCount();
            mailtoModal.hide(); // Close the modal
            showPostersSection(); // Go back to the main shopping page
            showMessageBox('Success!', 'Your inquiry has been sent and your cart has been cleared. Thank you!');
            // Reset active nav link to Home
            document.querySelectorAll('.navbar-nav .nav-link').forEach(link => link.classList.remove('active'));
            homeLink.classList.add('active');
        });

        messageBoxCloseBtn.addEventListener('click', hideMessageBox);
        messageBoxOverlay.addEventListener('click', (event) => {
            if (event.target === messageBoxOverlay) {
                hideMessageBox();
            }
        });

        navbarBrandLink.addEventListener('click', (event) => {
            event.preventDefault();
            showPostersSection();
            filterProducts('All'); // Reset filters to "All" when going to home
            // Also reset active nav link to Home
            document.querySelectorAll('.navbar-nav .nav-link').forEach(link => link.classList.remove('active'));
            homeLink.classList.add('active');
            // Also reset active filter button
            filterButtonsContainer.querySelectorAll('.btn').forEach(btn => {
                btn.classList.remove('active', 'btn-primary');
                btn.classList.add('btn-outline-primary');
            });
            const allButton = filterButtonsContainer.querySelector('.all-filter-button');
            if (allButton) {
                allButton.classList.add('active', 'btn-primary');
                allButton.classList.remove('btn-outline-primary');
            }
        });

        contactForm.addEventListener('submit', (event) => {
            event.preventDefault();
            const contactName = document.getElementById('contactName').value;
            const contactEmail = document.getElementById('contactEmail').value;
            const contactSubject = document.getElementById('contactSubject').value;
            const contactMessage = document.getElementById('contactMessage').value;

            const mailtoLink = generateContactMailtoLink(contactName, contactEmail, contactSubject, contactMessage);

            const newWindow = window.open(mailtoLink, '_blank');
            if (newWindow) {
                newWindow.blur();
                window.focus();
                contactForm.reset();
                contactModal.hide();
                showMessageBox('Message Sent', 'Your contact message has been sent. We will get back to you shortly.');
            } else {
                showMessageBox('Email Client Blocked', 'Your email client could not be opened automatically. Please copy the details below and send them manually to email@email.com:\n\n' + decodeURIComponent(mailtoLink.split('body=')[1]));
            }
        });

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            renderFilterButtons();
            filterProducts('All'); // Render all products by default
            updateCartCount();

            // Scroll to Top Button Logic
            scrollToTopBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            window.addEventListener('scroll', () => {
                // Only show on mobile/tablet screens (less than lg breakpoint which is 992px)
                if (window.innerWidth < 992) {
                    // Get the posters section element
                    const postersSectionElement = document.getElementById('posters-section');
                    if (postersSectionElement) {
                        // Check if the user has scrolled past the top of the posters section
                        // A buffer of 100px is added to ensure it's truly "above the fold"
                        const firstRowOffset = postersSectionElement.offsetTop + 100;
                        if (window.scrollY > firstRowOffset) {
                            scrollToTopBtn.classList.add('show');
                        } else {
                            scrollToTopBtn.classList.remove('show');
                        }
                    }
                } else {
                    // Ensure button is hidden on larger screens
                    (document.getElementById('scrollToTopBtn')).classList.remove('show');
                }
            });
        });
    </script>
</body>
</html>
